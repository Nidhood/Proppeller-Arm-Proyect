<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="prop_arm">

  <!-- World link -->
  <link name="world"/>

  <!-- Main robot link -->
  <link name="base_link">
    <collision name="base_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/collisions/base.stl" scale="1 1 1"/>
      </geometry>
    </collision>
    <inertial>
      <inertia ixx="4.49421" ixy="0" ixz="0" iyy="1.83979" iyz="0" izz="5.09395"/>
      <origin rpy="0 0 0" xyz="-0.00341 -0.01201 -0.10842"/>
      <mass value="10.0"/>
    </inertial>
    <visual name="base">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/visuals/base.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>

  <!-- Arm link -->
  <link name="arm_link">
    <collision name="arm_collision">
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/collisions/arm.stl" scale="1 1 1"/>
      </geometry>
    </collision>
    <inertial>
      <inertia ixx="1.0e-05" ixy="0" ixz="0" iyy="2.7e-04" iyz="0" izz="2.7e-04"/>
      <origin rpy="0 0 0" xyz="0.14437 -0.00020 0.01985"/>
      <mass value="0.02"/>
    </inertial>
    <visual name="arm">
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/visuals/arm.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>

  <!-- Motor link -->
  <link name="motor_link">
    <collision name="motor_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/collisions/motor.stl" scale="1 1 1"/>
      </geometry>
    </collision>
    <inertial>
      <inertia ixx="1.8825e-05" ixy="0" ixz="0" iyy="1.8825e-05" iyz="0" izz="1.5619e-05"/>
      <origin rpy="0 0 0" xyz="-0.00013 0.00073 -0.00279"/>
      <mass value="0.102"/>
    </inertial>
    <visual name="motor">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/visuals/motor.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>

  <!-- Propeller link-->
  <link name="prop_link">
    <collision name="prop_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/collisions/prop.stl" scale="1 1 1"/>
      </geometry>
    </collision>
    <inertial>
      <inertia ixx="1.0e-06" ixy="0" ixz="0" iyy="1.0e-06" iyz="0" izz="1.0e-06"/>
      <origin rpy="0 0 0" xyz="0.00007 0.00056 0.00001"/>
      <mass value="0.005"/>
    </inertial>
    <visual name="prop">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://prop_arm_description/models/prop_arm/meshes/visuals/prop.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>

  <!-- Joint between world and base -->
  <joint name="world_base_joint" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
  </joint>

  <!-- Joint between base and arm -->
  <joint name="arm_link_joint" type="revolute"> 
    <axis xyz="0 0 -1"/>
    <origin rpy="-1.57080 0 -1.57080" xyz="0.43129 -0.58144 0.11764"/>
    <limit lower="0" upper="1.5708" effort="1500.0" velocity="10.0"/>
    <dynamics damping="0.0" friction="0.0"/>
    <parent link="base_link"/>
    <child link="arm_link"/>
  </joint>

  <!-- Joint between arm and motor -->
  <joint name="motor_link_joint" type="fixed">
    <origin rpy="1.57080 -1.57080 0.00000" xyz="0.40028 -0.03651 0.02656"/>
    <parent link="arm_link"/>
    <child link="motor_link"/>
  </joint>

  <!-- Joint between motor and propeller -->
  <joint name="prop_link_joint" type="continuous">
    <dynamics damping="0.01"/>
    <origin rpy="0 0 0" xyz="0.00004 0 0.02475"/>
    <parent link="motor_link"/>
    <child link="prop_link"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Include materials for Gazebo -->
  <xacro:include filename="$(find prop_arm_gazebo)/urdf/prop_arm_materials.xacro"/>

  <!-- Include gazebo plugins -->
  <xacro:include filename="$(find prop_arm_gazebo_plugins)/urdf/prop_arm_gazebo_plugins.xacro"/>

  <!-- Include control interface -->
  <xacro:include filename="$(find prop_arm_gazebo_control)/urdf/prop_arm_control.xacro"/>
</robot>